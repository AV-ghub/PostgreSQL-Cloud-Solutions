# Архитектура распределения данных
> [Choosing Distribution Column](https://docs.citusdata.com/en/stable/sharding/data_modeling.html#choosing-distribution-column)
------------------------
<details>
  <summary><H2>Принципы распределения данных</H2></summary>
  
  Существуют следующие основные принципы распределения данных при построении баз данных приложения.
  
  <H3>Multi-Tenant Apps</H3>
  <p>
    Расположение всех релевантных данных под одним <b>tenant_id</b>. 
    Связь всех данных в обязательном порядке по ключу шардирования tenant_id.
    Т.е. по сути сведение множества однотипных баз данных заказчиков в одну базу с шардированием их по железу на базе tenant_id.
    Проблема <b>общих данных</b> решается технологией <a href="https://docs.citusdata.com/en/stable/develop/reference_ddl.html#reference-tables">Reference Tables</a>
  </p>
  
  <H3>Real-Time Apps</H3>
  <p>
    Цель подхода - обеспечение <b>мультипроцессинга</b> по максимальному количеству нод с макисмально равномерным рапределением.
    Сбор данных осуществляет координатор, с соотвествующими накладными расходами.
    Как и при рапараллеливании запросов, проблема целесообразности при данной конкретной нагрузке и сопоставимости затрат на сведение результатов с объемом обрабатываемых данных.
    Утверждается, что итоговая эффективность почти прямо пропорциональна количеству участвующих в обработке запроса нод.
  </p>
  <p>
    Ключом шардирования выбирается поле с наивысшей кардинальностью, используемое в:
  <ul>
    <li>группировках</li>
    <li>объединениях</li>
  </ul>
  </p>
  <p>
    Типовые ключи - пользователь, хост, устройство. Опять же предлагается не мучаться попытками разделения таблиц, содержащих измерения. а сделать из них то же самое <a href="https://docs.citusdata.com/en/stable/develop/reference_ddl.html#reference-tables">Reference Tables</a>
  </p>
  <p>
  Для примера - аналитические <a href="https://docs.citusdata.com/en/stable/use_cases/realtime_analytics.html#real-time-dashboards">Real-Time Dashboards</a>
  </p>
  
  <H3>Timeseries Data</H3>
</details>
