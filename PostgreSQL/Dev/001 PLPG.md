### üìù 1. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–∫–æ—Å–∏—Å—Ç–µ–º: T-SQL (MS SQL Server) vs PL/pgSQL (PostgreSQL)
–ù–∞—á–Ω–µ–º —Å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É —Å—Ä–µ–¥–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–±–æ—Ç–∞—é—Ç —ç—Ç–∏ —è–∑—ã–∫–∏.

| –ê—Å–ø–µ–∫—Ç | T-SQL (MS SQL Server) | PL/pgSQL (PostgreSQL) | –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è |
| :--- | :--- | :--- | :--- |
| **–§–∏—Ä–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** | `TOP`, –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å `OVER`, `MERGE` | `FILTER`, `DISTINCT ON`, –º–æ—â–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (PostGIS, JSONB) | –í–æ–ø—Ä–æ—Å—ã –æ –ø–µ—Ä–µ–Ω–æ—Å–µ –∫–æ–¥–∞ –∏–ª–∏ –≤—ã–±–æ—Ä–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** | –ù–µ—è–≤–Ω—ã–µ –∏ —è–≤–Ω—ã–µ, `BEGIN TRANSACTION` | –¢–æ–ª—å–∫–æ —è–≤–Ω—ã–µ: `BEGIN` ‚Üí `COMMIT`/`ROLLBACK` | –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö/–ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö |
| **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è** | –Ø–∑—ã–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ | **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —è–∑—ã–∫**, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–π SQL  | PL/pgSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –≤ –ë–î –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫ . |
| **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** | `NVARCHAR`, `DATETIME`, `MONEY` | `VARCHAR`/`TEXT`, `TIMESTAMP` —Å TZ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–∏–ø—ã | –í–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–æ–≤ –∏ –≤—ã–±–æ—Ä–µ –∞–Ω–∞–ª–æ–≥–æ–≤ |
| **–†–∞–±–æ—Ç–∞ —Å NULL** | `ISNULL()`, `NULL` –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ | `COALESCE()`, —Å—Ç—Ä–æ–≥–∏–π `IS DISTINCT FROM` | –ò–∑–≤–µ—Å—Ç–Ω—ã–π –ø–æ–¥–≤–æ–¥–Ω—ã–π –∫–∞–º–µ–Ω—å SQL: `NULL = NULL` ‚Üí `NULL` (–ª–æ–∂—å)  |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | `TRY...CATCH` | –ë–ª–æ–∫ `EXCEPTION` —Å –∫–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫ (`SQLSTATE`) | –ó–Ω–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ `EXCEPTION WHEN ... THEN`  |
| **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞** | –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (`PROCEDURE`) –∏ —Ñ—É–Ω–∫—Ü–∏–∏ | **–§—É–Ω–∫—Ü–∏–∏** (`RETURNS ...`) –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (`CREATE PROCEDURE`) | –í–æ–ø—Ä–æ—Å—ã –æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ —Ñ—É–Ω–∫—Ü–∏–π |

### üõ†Ô∏è 2. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ PL/pgSQL
–ï—Å–ª–∏ –≤ T-SQL –≤—ã –ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–ª–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –≤ PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ PL/pgSQL ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –º–æ–¥—É–ª–∏. –í–æ—Ç –∫–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è PL/pgSQL | –û–ø–∏—Å–∞–Ω–∏–µ –∏ –æ—Ç–ª–∏—á–∏—è –æ—Ç T-SQL |
| :--- | :--- |
| **–ë–ª–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | –ö–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç—Å—è –≤ –±–ª–æ–∫–∏: `DECLARE` ‚Üí `BEGIN` ‚Üí `EXCEPTION` ‚Üí `END`. –ë–ª–æ–∫–∏ –º–æ–∂–Ω–æ –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å. |
| **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** | –û–±—ä—è–≤–ª—è—é—Ç—Å—è –≤ `DECLARE`. –¢–∏–ø—ã: —Å–∫–∞–ª—è—Ä–Ω—ã–µ, `%TYPE`, `%ROWTYPE`, `RECORD`. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ `CONSTANT`. |
| **–†–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏ —Å—Ç—Ä–æ–∫** | –î–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∫–∞–≤—ã—á–∫–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–æ–ª–ª–∞—Ä–æ–≤—ã—Ö –∫–∞–≤—ã—á–µ–∫** (`$$`, `$func$`) . |
| **–£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** | –ï—Å—Ç—å `IF`, `CASE`, `LOOP`, `WHILE`, `FOR` (–≤ —Ç.—á. –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤). –í—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–∞ ‚Äî `EXIT WHEN`. |
| **–§—É–Ω–∫—Ü–∏–∏ vs –ü—Ä–æ—Ü–µ–¥—É—Ä—ã** | **–§—É–Ω–∫—Ü–∏—è** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ SQL. **–ü—Ä–æ—Ü–µ–¥—É—Ä–∞** (`PROCEDURE`) ‚Äî –Ω–µ—Ç. |
| **–†–µ–∂–∏–º—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** | `IN`, `OUT`, `INOUT`, `VARIADIC` (–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ). –í–æ–∑–≤—Ä–∞—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ `OUT` –∏–ª–∏ `RETURNS TABLE` . |
| **–†–∞–±–æ—Ç–∞ —Å –∫—É—Ä—Å–æ—Ä–∞–º–∏** | –Ø–≤–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (`DECLARE`, `OPEN`, `FETCH`, `CLOSE`) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ —Å—Ç—Ä–æ–∫. |
| **–¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** | –§—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ `TRIGGER`, –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ `NEW`/`OLD`. |
| **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SQL** | –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `EXECUTE`. |

### üöÄ 3. –ü–ª–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: –æ—Ç T-SQL –∫ PL/pgSQL
–í–æ—Ç —Ç–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ. –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç T-SQL —Å—Ñ–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã.

| –ß—Ç–æ –≤—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ (T-SQL) | –ù–∞ —á—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –≤ PL/pgSQL | –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è | –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ |
| :--- | :--- | :--- | :--- |
| –ü—Ä–æ—Ü–µ–¥—É—Ä—ã, —Ñ—É–Ω–∫—Ü–∏–∏ | –°–∏–Ω—Ç–∞–∫—Å–∏—Å `CREATE FUNCTION`, —Å—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∏–ø–æ–≤, `LANGUAGE plpgsql` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞ | –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `id` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `(name, salary)` –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞. |
| –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `DECLARE @var` | –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –±–ª–æ–∫–µ `DECLARE`. –¢–∏–ø–∏–∑–∞—Ü–∏—è: `table_name.column_name%TYPE` | `%TYPE`, `%ROWTYPE`, `RECORD`, –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ | –û–±—ä—è–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∏–ø–∞ `employees.salary%TYPE`. |
| `IF-ELSE`, `CASE` | `IF ... THEN ... ELSIF ... ELSE ... END IF;`. `CASE` –ø–æ—Ö–æ–∂ –Ω–∞ SQL. | –£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è | –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (`A`,`B`,`C`) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. |
| –¶–∏–∫–ª—ã `WHILE` | `LOOP`, `WHILE`, `FOR` (—Ü–∏–∫–ª –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑–∞–ø—Ä–æ—Å–∞) | `FOR record IN SELECT ... LOOP`, `EXIT WHEN`, `CONTINUE` | –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π —Å—É–º–º–∏—Ä—É–µ—Ç —á–∏—Å–ª–∞ –æ—Ç 1 –¥–æ N, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ. |
| –ö—É—Ä—Å–æ—Ä—ã | –Ø–≤–Ω—ã–µ –∫—É—Ä—Å–æ—Ä—ã: `DECLARE cur CURSOR FOR SELECT ...` | –û—Ç–∫—Ä—ã—Ç–∏–µ, –≤—ã–±–æ—Ä–∫–∞, –∑–∞–∫—Ä—ã—Ç–∏–µ –∫—É—Ä—Å–æ—Ä–æ–≤, —Ü–∏–∫–ª `FOR` –ø–æ –∫—É—Ä—Å–æ—Ä—É | –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ –æ—Ç–¥–µ–ª–∞ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç. |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ `TRY-CATCH` | –ë–ª–æ–∫ `EXCEPTION` —Å —É—Å–ª–æ–≤–∏—è–º–∏ `WHEN unique_violation THEN ...`  | –ö–æ–¥—ã –æ—à–∏–±–æ–∫ (`SQLSTATE`), `RAISE NOTICE/EXCEPTION` | –ù–∞–ø–∏—à–∏—Ç–µ –±–ª–æ–∫ —Å –≤—Å—Ç–∞–≤–∫–æ–π, –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –æ—à–∏–±–∫—É –Ω–∞—Ä—É—à–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (`unique_violation`). |
| –†–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ | –¢–∞–±–ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (`CREATE TEMP TABLE`) | –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü, –∏–Ω–¥–µ–∫—Å—ã | –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. |
| –¢—Ä–∏–≥–≥–µ—Ä—ã | –¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `CREATE FUNCTION trig_func() RETURNS TRIGGER ...` | –î–æ—Å—Ç—É–ø –∫ `NEW`/`OLD`, `TG_OP`, –≤–æ–∑–≤—Ä–∞—Ç `NEW`/`NULL` | –ù–∞–ø–∏—à–∏—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä, –ª–æ–≥–∏—Ä—É—é—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `orders` –≤ —Ç–∞–±–ª–∏—Ü—É `audit_log`. |

### üîç 4. –¢–∏–ø–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
–í–æ—Ç –∫–∞–∫ –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –Ω–∞ —á—Ç–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ.

**1. –í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ:**
*   **¬´–í —á–µ–º –∫–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏ –≤ PostgreSQL?¬ª** –§—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —á–∞—Å—Ç—å—é –≤—ã—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `SELECT`), –∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–µ—Ç. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π (–∫–∞–∫ —Å–∫—Ä–∏–ø—Ç), –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ (`COMMIT`/`ROLLBACK` –≤–Ω—É—Ç—Ä–∏), –∞ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –Ω–µ—Ç .
*   **¬´–ö–∞–∫ –±—ã –≤—ã –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ —Ö—Ä–∞–Ω–∏–º—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É —Å `OUTPUT`-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ SQL Server?¬ª** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–∞ `OUT` –∏–ª–∏ `INOUT` –≤ —Ñ—É–Ω–∫—Ü–∏–∏, –ª–∏–±–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∫–∞–∫ `RETURNS TABLE` .

**2. –í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
*   **¬´–ü–æ—á–µ–º—É –¥–ª—è —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ª–ª–∞—Ä–æ–≤—ã–µ –∫–∞–≤—ã—á–∫–∏ (`$$`)?¬ª** –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–µ .
*   **¬´–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é?¬ª** –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `SELECT INTO` (–Ω–µ –ø—É—Ç–∞—Ç—å —Å `INSERT INTO ... SELECT`) –∏–ª–∏ `FETCH` –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞. –í–∞–∂–Ω–æ: –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, `SELECT INTO` –≤—ã–±–µ—Ä–µ—Ç –ø–µ—Ä–≤—É—é, –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–æ–π –ª–æ–≥–∏–∫–∏. –ú–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `plpgsql.extra_warnings` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è .

**3. –í–æ–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é:**
*   **¬´–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PL/pgSQL –≤–º–µ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?¬ª** –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫ (–ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ë–î), —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Å—á–µ—Ç –∏–∑–±–µ–≥–∞–Ω–∏—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ .
*   **¬´–ß—Ç–æ —Ç–∞–∫–æ–µ `%ROWTYPE` –∏ –∫–æ–≥–¥–∞ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∏–±–æ–ª–µ–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ?¬ª** –≠—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã. –ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã, –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Å—Ö–µ–º—ã.

**4. –ö–æ–≤–∞—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏):**
*   **¬´–ö–∞–∫–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è `NULL = NULL` –≤ PostgreSQL?¬ª** –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî `NULL` (–Ω–µ `TRUE`). –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å `NULL` –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã `IS NULL` –∏–ª–∏ `IS DISTINCT FROM` .
*   **¬´–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –∑–∞–ø—Ä–æ—Å `SELECT 3 NOT IN (1, 2, NULL);` –∏ –ø–æ—á–µ–º—É?¬ª** –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî `FALSE` (–∞ –Ω–µ `TRUE`). –û–ø–µ—Ä–∞—Ç–æ—Ä `NOT IN` —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —Ü–µ–ø–æ—á–∫—É `AND`: `(3<>1) AND (3<>2) AND (3<>NULL)`. –ü–æ—Å–∫–æ–ª—å–∫—É `3<>NULL` –¥–∞–µ—Ç `NULL`, –∞ `NULL` –≤ –ª–æ–≥–∏–∫–µ `AND` "–∑–∞—Ç—É—Ö–∞–µ—Ç", –≤—Å–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `FALSE` .
*   **¬´–í —á–µ–º –æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `SELECT ... INTO`?¬ª** –û–Ω–∞ –º–æ–ª—á–∞–ª–∏–≤–æ –±–µ—Ä–µ—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫. –≠—Ç–æ –º–æ–∂–µ—Ç –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –¥–∞–Ω–Ω—ã—Ö. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `LIMIT 1` —è–≤–Ω–æ –∏–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `too_many_rows` .

**5. –í–æ–ø—Ä–æ—Å—ã –ø–æ –æ—Ç–ª–∞–¥–∫–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∫–æ–¥–∞:**
*   **¬´–ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π?¬ª** –ü—Ä–∏–º–µ—Ä: —Ä–∞–±–æ—Ç–∞ –≤ –¥–≤—É—Ö –æ–∫–Ω–∞—Ö (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ `psql`), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CREATE OR REPLACE FUNCTION` –∏ `\i —Ñ–∞–π–ª.sql` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å GUI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ pgAdmin .
*   **¬´–ö–∞–∫ –º–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–æ–¥–∞?¬ª** –í–∫–ª—é—á–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `plpgsql.extra_warnings` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `shadowed_variables`, `strict_multi_assignment`) .

### üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏
–í—ã —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ –≥–ª–∞–≤–Ω–æ–µ ‚Äî —Ä–µ—à–∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ –ø–æ–¥–æ–π—Ç–∏ –∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ. –í–∞–º –Ω—É–∂–Ω–æ –Ω–µ ¬´—É—á–∏—Ç—å –≤—Å—ë¬ª, –∞ –∞–∫—Ü–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–∏—è—Ö –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º T-SQL –∏ PL/pgSQL. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—à–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤ —ç—Ç–æ–º.
